# ğŸš€ å¿«é€Ÿå¼€å§‹æŒ‡å—

## é¡¹ç›®æ¦‚è§ˆ

**å¾½æ´¾å®¶ç§æ•°å­—ç®¡ç†å¹³å°** æ˜¯ä¸€ä¸ªå…¨æ ˆåº”ç”¨ï¼ŒåŒ…å«ï¼š
- âœ… å‰ç«¯ï¼šVue 3 + Element Plus + Viteï¼ˆé€šè¿‡å¼€å‘æœåŠ¡å™¨/æ„å»ºè¾“å‡ºï¼‰
- âœ… åç«¯ï¼šPython Flask + Online-Office API é›†æˆ
- âœ… æ•°æ®åº“ï¼šé€šè¿‡å­—æ®µåˆ«åæ˜ å°„å¯¹æ¥ Online-Office å¹³å°

## ğŸ“¦ é¡¹ç›®æ–‡ä»¶ç»“æ„

```
huipai/
â”œâ”€â”€ frontend/                          # å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ index.html                     # Vite å…¥å£
â”‚   â”œâ”€â”€ package.json                   # å‰ç«¯ä¾èµ–ä¸è„šæœ¬
â”‚   â”œâ”€â”€ vite.config.js                 # Vite é…ç½®
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ App.vue                    # æ ¹ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ main.js                    # åº”ç”¨å…¥å£
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â””â”€â”€ client.js              # API å®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”‚   â””â”€â”€ StageConfig.vue        # é¡¹ç›®é˜¶æ®µé…ç½®é¡µé¢
â”‚   â”‚   â””â”€â”€ styles/
â”‚   â”‚       â””â”€â”€ main.css               # å…¨å±€æ ·å¼
â”‚   â””â”€â”€ dist/                          # æ„å»ºè¾“å‡º (npm run build)
â”‚
â”œâ”€â”€ backend/                           # åç«¯åº”ç”¨
â”‚   â”œâ”€â”€ app.py                         # ğŸ“„ ä¸»åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ config.py                      # ğŸ“„ é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ field_mapping.py               # ğŸ“„ å­—æ®µåˆ«åæ˜ å°„ (æ–°å¢)
â”‚   â”œâ”€â”€ requirements.txt               # ğŸ“„ Pythonä¾èµ– (æ–°å¢)
â”‚   â”œâ”€â”€ .env                           # ğŸ“„ ç¯å¢ƒé…ç½® (æ–°å¢)
â”‚   â”œâ”€â”€ run.bat / run.sh               # ğŸ“„ å¯åŠ¨è„šæœ¬ (æ–°å¢)
â”‚   â”œâ”€â”€ api/                           # APIè·¯ç”±
â”‚   â”‚   â”œâ”€â”€ stage_config.py            # é˜¶æ®µé…ç½®è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ project.py                 # é¡¹ç›®ç®¡ç†è·¯ç”±
â”‚   â”‚   â””â”€â”€ online_office.py           # Online-Office APIå®¢æˆ·ç«¯
â”‚
â””â”€â”€ SETUP_GUIDE.md                     # ğŸ“„ å®Œæ•´è®¾ç½®æŒ‡å—

âœ… = æ–°åˆ›å»ºçš„æ–‡ä»¶
```

## âš¡ 3åˆ†é’Ÿå¿«é€Ÿå¯åŠ¨

### æ­¥éª¤1ï¸âƒ£: å¯åŠ¨åç«¯æœåŠ¡

#### Windows ç”¨æˆ·ï¼š
```bash
cd backend
run.bat
```

#### Linux/Mac ç”¨æˆ·ï¼š
```bash
cd backend
bash run.sh
```

#### æ‰‹åŠ¨å¯åŠ¨ï¼ˆæ‰€æœ‰å¹³å°ï¼‰ï¼š
```bash
cd backend
python -m venv venv                    # åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
source venv/bin/activate              # æ¿€æ´» (Linux/Mac)
# æˆ– venv\Scripts\activate              # æ¿€æ´» (Windows)
pip install -r requirements.txt        # å®‰è£…ä¾èµ–
python app.py                          # å¯åŠ¨åº”ç”¨
```

âœ… **é¢„æœŸè¾“å‡º**ï¼š
```
 * Running on http://172.16.0.66:9989
 * Press CTRL+C to quit
```

### æ­¥éª¤2ï¸âƒ£: éªŒè¯åç«¯æœåŠ¡

åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€å¥åº·æ£€æŸ¥æ¥å£ï¼š

```
http://172.16.0.66:9989/health
```

### æ­¥éª¤3ï¸âƒ£: å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨

```bash
cd frontend
npm install
npm run dev
```

è®¿é—®ï¼š`http://localhost:9988`

å¦‚éœ€æ‰“åŒ…ä¸é¢„è§ˆï¼š

```bash
npm run build
npm run preview
```

é»˜è®¤åç«¯åœ°å€ä¸º `http://172.16.0.66:9989`ã€‚å¦‚éœ€åˆ‡æ¢ï¼Œè¯·åœ¨ `frontend` ç›®å½•åˆ›å»º `.env.local`ï¼š

```
VITE_API_BASE_URL=http://your-api-host:9989
```

## ğŸ”Œ å‰åç«¯æ•°æ®æµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å‰ç«¯åº”ç”¨          â”‚
â”‚  (Vue 3 + Vite)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ HTTP è¯·æ±‚
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Python Flask API   â”‚
â”‚  :9989             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ å­—æ®µæ˜ å°„
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Online-Office API  â”‚
â”‚  (äº‘ç«¯æ•°æ®åº“)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### 1. é¡¹ç›®æ‰¿åŠäº‹é¡¹ç®¡ç†
- ğŸ“‹ æŸ¥çœ‹é¡¹ç›®ä»»åŠ¡åˆ—è¡¨
- ğŸ‘¤ ç®¡ç†æ‰§è¡Œäºº
- âš ï¸  æ˜¾ç¤ºé¢„è­¦çŠ¶æ€
- ğŸ“… æ—¶é—´ç®¡ç†

### 2. é¡¹ç›®é˜¶æ®µé…ç½®
- ğŸŒ³ æ ‘å½¢ç»“æ„ç¼–è¾‘
- â• æ·»åŠ æ–°é˜¶æ®µ/èŠ‚ç‚¹
- âœï¸ ä¿®æ”¹é…ç½®
- ğŸ—‘ï¸ åˆ é™¤èŠ‚ç‚¹

## ğŸ“¡ API ç«¯ç‚¹é€ŸæŸ¥

| åŠŸèƒ½ | æ–¹æ³• | ç«¯ç‚¹ |
|------|------|------|
| åˆ—è¡¨ | GET | `/api/stage/list` |
| è¯¦æƒ… | GET | `/api/stage/get/{id}` |
| æ–°å¢ | POST | `/api/stage/create` |
| ä¿®æ”¹ | PUT | `/api/stage/update/{id}` |
| åˆ é™¤ | DELETE | `/api/stage/delete/{id}` |
| é¡¹ç›®åˆ—è¡¨ | GET | `/api/project/list` |
| é¡¹ç›®è¯¦æƒ… | GET | `/api/project/get/{id}` |
| åˆ›å»ºé¡¹ç›® | POST | `/api/project/create` |
| æ›´æ–°é¡¹ç›® | PUT | `/api/project/update/{id}` |
| åˆ é™¤é¡¹ç›® | DELETE | `/api/project/delete/{id}` |

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡ (backend/.env)

```env
# è°ƒè¯•æ¨¡å¼
DEBUG=True

# Flaskå¯†é’¥
SECRET_KEY=your-secret-key-here

# Online-Office é…ç½®
ONLINE_OFFICE_BASE_URL=https://ahyg.online-office.net/openapi/v1
APP_ID=59e10c88146584ed89e2896b
```

### API å®¢æˆ·ç«¯é…ç½®

é»˜è®¤è¿æ¥åˆ° `http://172.16.0.66:9989`ï¼ˆå¯é€šè¿‡ `VITE_API_BASE_URL` è¦†ç›–ï¼‰ã€‚

åœ¨ `frontend` ç›®å½•åˆ›å»º `.env.local`ï¼š
```
VITE_API_BASE_URL=http://your-api-host:9989
```

## ğŸ› å¸¸è§é—®é¢˜

### Q1: å‰ç«¯æ— æ³•è¿æ¥åç«¯
**A:** æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
1. âœ… åç«¯æ˜¯å¦æ­£åœ¨è¿è¡Œï¼Ÿ (`python app.py`)
2. âœ… åç«¯åœ°å€æ˜¯å¦æ­£ç¡®ï¼Ÿ (http://172.16.0.66:9989)
3. âœ… æ˜¯å¦é‡åˆ°CORSé”™è¯¯ï¼Ÿ
4. âœ… æµè§ˆå™¨æ§åˆ¶å° (F12) æœ‰ä»€ä¹ˆé”™è¯¯ä¿¡æ¯ï¼Ÿ

### Q2: ä¿®æ”¹åç«¯ä»£ç åä¸ç”Ÿæ•ˆ
**A:** 
1. åœæ­¢åç«¯æœåŠ¡ (Ctrl+C)
2. é‡æ–°å¯åŠ¨ `python app.py`
3. åˆ·æ–°å‰ç«¯é¡µé¢ (F5)

### Q3: è™šæ‹Ÿç¯å¢ƒç›¸å…³é”™è¯¯
**A:** é‡å»ºè™šæ‹Ÿç¯å¢ƒï¼š
```bash
rm -rf venv                    # Linux/Mac: rm -rf venv
# Windows: rmdir /s venv
python -m venv venv
source venv/bin/activate      # Linux/Mac
# Windows: venv\Scripts\activate
pip install -r requirements.txt
```

### Q4: Online-Office API è¿æ¥å¤±è´¥
**A:**
1. æ£€æŸ¥ç½‘ç»œè¿æ¥
2. éªŒè¯ APP_ID æ˜¯å¦æ­£ç¡®
3. æ£€æŸ¥ API å¯†é’¥æœ‰æ•ˆæœŸ
4. æŸ¥çœ‹ `backend/.env` é…ç½®

## ğŸ“š æ–‡ä»¶è¯´æ˜

### å‰ç«¯æ–‡ä»¶

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `index.html` | Vite å…¥å£ |
| `src/pages/StageConfig.vue` | é¡¹ç›®é˜¶æ®µé…ç½®é¡µé¢ |
| `src/api/client.js` | API å®¢æˆ·ç«¯ |
| `src/styles/main.css` | å…¨å±€æ ·å¼ |

### åç«¯æ–‡ä»¶

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `app.py` | Flaskåº”ç”¨ä¸»æ–‡ä»¶ |
| `config.py` | âœ¨ æ–°å¢ - é…ç½®æ–‡ä»¶ |
| `field_mapping.py` | âœ¨ æ–°å¢ - å­—æ®µåˆ«åæ˜ å°„ |
| `requirements.txt` | âœ¨ æ–°å¢ - Pythonä¾èµ– |
| `.env` | âœ¨ æ–°å¢ - ç¯å¢ƒé…ç½® |
| `run.bat` / `run.sh` | âœ¨ æ–°å¢ - å¯åŠ¨è„šæœ¬ |
| `api/online_office.py` | âœ¨ æ–°å¢ - Online-Office APIå®¢æˆ·ç«¯ |
| `api/stage_config.py` | âœ¨ æ–°å¢ - é˜¶æ®µé…ç½®APIè·¯ç”± |
| `api/project.py` | âœ¨ æ–°å¢ - é¡¹ç›®APIè·¯ç”± |

## ğŸ“ å­¦ä¹ èµ„æº

- [Flask å®˜æ–¹æ–‡æ¡£](https://flask.palletsprojects.com/)
- [Vue 3 å®˜æ–¹æ–‡æ¡£](https://vuejs.org/)
- [Element Plus ç»„ä»¶åº“](https://element-plus.org/)
- [Online-Office OpenAPI](https://ahyg.online-office.net/openapi)

## ğŸ’¡ ä¸‹ä¸€æ­¥

### åŠŸèƒ½æ‰©å±•å»ºè®®
1. æ·»åŠ ç”¨æˆ·è®¤è¯
2. å®ç°æ–‡ä»¶ä¸Šä¼ 
3. æ·»åŠ æ•°æ®å¯¼å‡ºåŠŸèƒ½
4. å®ç°æƒé™æ§åˆ¶
5. æ·»åŠ æ—¥å¿—è®°å½•

### éƒ¨ç½²å»ºè®®
1. ä½¿ç”¨ Gunicorn æ›¿ä»£å¼€å‘æœåŠ¡å™¨
2. é…ç½® Nginx åå‘ä»£ç†
3. ä½¿ç”¨ Docker å®¹å™¨åŒ–
4. é…ç½® HTTPS/SSL

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

1. æŸ¥çœ‹ [å®Œæ•´è®¾ç½®æŒ‡å—](./SETUP_GUIDE.md)
2. è®¿é—® `http://172.16.0.66:9989/health` æ£€æŸ¥æœåŠ¡
3. æ£€æŸ¥æµè§ˆå™¨å¼€å‘è€…å·¥å…· (F12) ä¸­çš„é”™è¯¯ä¿¡æ¯
4. æŸ¥çœ‹åç«¯ç»ˆç«¯è¾“å‡ºä¸­çš„é”™è¯¯æ—¥å¿—

---

**ç¥è´ºï¼ğŸ‰** æ‚¨å·²æˆåŠŸæ­å»ºå¾½æ´¾å®¶ç§æ•°å­—ç®¡ç†å¹³å°ï¼

**ä¸‹ä¸€æ­¥**: åœ¨ `frontend` ç›®å½•è¿è¡Œ `npm run dev` å¹¶è®¿é—® `http://localhost:9988` å¼€å§‹ä½¿ç”¨ï¼
